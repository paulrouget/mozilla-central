<?xml version="1.0" encoding="UTF-8"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
     - License, v. 2.0. If a copy of the MPL was not distributed with this
     - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->
<!DOCTYPE html [
  <!ENTITY % appMgrDTD SYSTEM "chrome://browser/locale/devtools/app-manager.dtd" >
  %appMgrDTD;
]>

<html xmlns="http://www.w3.org/1999/xhtml">

  <head>
    <meta charset="utf8"/>
    <base href="chrome://browser/content/devtools/app-manager/"></base>

    <title>&projects.title;</title>

    <link rel="stylesheet" href="layout.css" type="text/css"/>
    <link rel="stylesheet" href="projects.css" type="text/css"/>
    <link rel="stylesheet" href="chrome://browser/skin/devtools/app-manager-common.css" type="text/css"/>
    <link rel="stylesheet" href="chrome://browser/skin/devtools/projects.css" type="text/css"/>
  </head>

  <body onload="UI.onload()">
  <section id="content">
      <section id="list">
        <div id="projects">
          <div template-loop='{"arrayPath":"app.projects","childSelector":"#project-template"}'></div>
        </div>
        <div id="new-app-buttons">
          <div id="new-app-type">
            <div class="button-plus button" onclick="UI.addPackaged()">&projects.addPackaged;
            </div>
            <div class="button-plus button" onclick="UI.addHosted()">&projects.addHosted;
              <input value="" id="hosted-manifest-url" type="url" pattern="https?://.+" placeholder="http://mydomain.com/app/webapp.manifest" size="50" />
            </div>
          </div>
        </div>
      </section>
      <section id="detail">
        <div id="lense">
          <div id="watermark"></div>
        </div>
      </section>
    </section>
  </body>

  <template id="project-template">
  <div class="list-item" template='{"type":"attribute","path":"location","name":"id"}' onclick="UI.selectProject(this.id)">
    <div class="project-status" template='{"type":"attribute","path":"validationStatus","name":"status"}'></div>
    <img class="project-icon" template='{"type":"attribute","path":"icon","name":"src"}' />
    <div class="project-meta">
      <strong class="name" template='{"type":"textContent","path":"name"}'></strong>
      <span class="type" template='{"type":"textContent","path":"type"}'></span>
      <p class="location" template='{"type":"textContent","path":"manifest.description"}'></p>
      <div class="validation">
        <div class="errors" template='{"type":"attribute","path":"validationStatus","name":"status"}'><span template='{"type":"textContent","path":"errorsCount"}'></span></div>
        <div class="warnings" template='{"type":"attribute","path":"validationStatus","name":"status"}'><span template='{"type":"textContent","path":"warningsCount"}'></span></div>
        <button class="project-button-remove" onclick="UI.remove(this.dataset.location)" template='{"type":"attribute","path":"location","name":"data-location"}' title="&projects.removeApp;">&projects.removeApp;</button>
      </div>
    </div>
  </div>
  </template>

  <template id="lense-template">
  <div>
    <div class="app-details" template='{"type":"attribute","path":"validationStatus","name":"status"}'>
    <div class="app-header">
      <div class="project-icon">
        <img template='
      {"type":"attribute","path":"icon","name":"src"}' />
      </div>
      <div class="project-details">
        <div class="title">
          <h1 template='{"type":"textContent","path":"name"}'></h1>
          <div class="app-status" template='{"type":"attribute","path":"validationStatus","name":"status"}'>
            <p class="validation" template='{"type":"textContent","path":"validationStatus"}'></p>
            <p class="type" template='{"type":"textContent","path":"type"}'></p>
          </div>
        </div>
        <span template='{"type":"textContent","path":"manifest.developer.name"}'></span>
        <p class="location" template='{"type":"textContent","path":"location"}' onclick="UI.reveal(this.textContent)"></p>
        <p class="description" template='{"type":"textContent","path":"manifest.description"}'></p>
      </div>
    </div>
    <div class="control-bar">
      <button class="project-button-refresh" onclick="UI.update(this.dataset.location)" template='{"type":"attribute","path":"location","name":"data-location"}'>&projects.reloadFiles;</button>
      <button class="project-button-install" template='{"type":"attribute","path":"location","name":"data-location"}'>&projects.installApp;</button>
      <button class="project-button-start" template='{"type":"attribute","path":"location","name":"data-location"}'>&projects.startApp;</button>
      <button class="project-button-stop" template='{"type":"attribute","path":"location","name":"data-location"}'>&projects.stopApp;</button>
      <button class="project-button-debug" template='{"type":"attribute","path":"location","name":"data-location"}'>&projects.debugApp;</button>
    </div>
    <div class="errors" template='{"type":"textContent","path":"errors"}'></div>
    <div class="warnings" template='{"type":"textContent","path":"warnings"}'></div>
    </div>
  </div>
  </template>


  <script type="application/javascript;version=1.8" src="projects.js"></script>
  <script type="application/javascript;version=1.8" src="template.js"></script>
</html>
