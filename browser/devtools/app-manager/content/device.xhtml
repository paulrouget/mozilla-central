<?xml version="1.0" encoding="UTF-8"?>
<!-- This Source Code Form is subject to the terms of the Mozilla Public
     - License, v. 2.0. If a copy of the MPL was not distributed with this
     - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->
<!DOCTYPE html [
  <!ENTITY % deviceDTD SYSTEM "chrome://browser/locale/devtools/device.dtd" >
  %deviceDTD;
]>


<html xmlns="http://www.w3.org/1999/xhtml">

  <meta charset="utf8"/>
  <title>&title;</title>

  <link rel="stylesheet" href="chrome://browser/content/devtools/app-manager/device.css" type="text/css"/>
  <link rel="stylesheet" href="chrome://browser/skin/devtools/device.css" type="text/css"/>

  <body onload="UI.init()">

    <div id="notConnectedMessage">&notConnected;</div>

    <div id="content">
      <div class="meta">
        <header>
          <h1>
            <span template='{"type":"textContent","path":"device.description.name"}'></span>
            <span template='{"type":"textContent","path":"device.description.version"}'></span>
            (<span template='{"type":"textContent","path":"device.description.channel"}'></span>)
          </h1>
          <h2>
            <span>Gecko </span>
            <span template='{"type":"textContent","path":"device.description.geckoversion"}'></span>
          </h2>
        </header>
        <details>
          <p><button onclick="UI.screenshot()">&screenshot;</button>  <button>&killall;</button></p>
          <p template='{"type":"localizedContent","property":"deviceSize", "paths":["device.description.width","device.description.height","device.description.dpi"]}'></p>
        </details>
      </div>

      <div id="tabs-headers">
        <h2 onclick="UI.setTab('apps')" class="tab apps">Installed Apps</h2>
        <h2 onclick="UI.setTab('permissions')" class="tab permissions">Permissions</h2>
      </div>

      <div id="tabs">
        <div class="tabpanel apps" template-loop='{"arrayPath":"apps.all","childSelector":"#app-template"}'></div>
        <div class="tabpanel permissions" template-loop='{"arrayPath":"device.permissions","childSelector":"#permission-template"}'></div>
      </div>
    </div>

    <iframe id="connection-footer" src="chrome://browser/content/devtools/app-manager/connection-footer.xhtml"></iframe>
  </body>

  <template id="permission-template">
  <![CDATA[
  <div class="permission">
    <p>
    <span template='{"type":"textContent","path":"name"}'></span>
    <span template='{"type":"textContent","path":"app"}'></span>/
    <span template='{"type":"textContent","path":"privileged"}'></span>/
    <span template='{"type":"textContent","path":"certified"}'></span>
    </p>
  </div>
  ]]>
  </template>

  <template id="app-template">
  <![CDATA[
  <div class="app" template='{"type":"attribute","path":"running","name":"running"}'>
    <img class="app-icon" template='{"type":"attribute","path":"iconURL","name":"src"}'></img>
    <span class="app-name" template='{"type":"textContent","path":"name"}'></span>
    <button class="app-button debug-app-button" template='{"type":"attribute","path":"manifestURL","name":"data-manifest"}' onclick="UI.openToolbox(this.dataset.manifest)">debug</button>
    <button class="app-button start-app-button" template='{"type":"attribute","path":"manifestURL","name":"data-manifest"}' onclick="UI.startApp(this.dataset.manifest)">start</button>
    <button class="app-button stop-app-button"  template='{"type":"attribute","path":"manifestURL","name":"data-manifest"}' onclick="UI.stopApp(this.dataset.manifest)">stop</button>
  </div>
  ]]>
  </template>

  <template id="setting-template">
  <![CDATA[
  <div class="setting" template='{"type":"attribute","path":"name","name":"data-name"}'>
    <data class="setting-name" template='{"type":"attribute","path":"name","name":"value"}'>
    <span template='{"type":"textContent","path":"name"}'></span>
    </data>
    <div class="setting-value" template='{"type":"attribute","path":"type","name":"type"}'>
      <input onchange="UI.updateSetting(this)" type="checkbox" template='{"type":"attributePresence","path":"value","name":"checked"}'></input>
      <input onchange="UI.updateSetting(this)" type="text" template='{"type":"attribute","path":"value","name":"value"}'></input>
      <input onchange="UI.updateSetting(this)" type="number" template='{"type":"attribute","path":"value","name":"value"}'></input>
      <a target="_" template='{"type":"attribute","path":"value","name":"href"}'>data:...</a>
    </div>
  </div>
  ]]>
  </template>

  <script type="application/javascript;version=1.8" src="chrome://browser/content/devtools/app-manager/device.js"></script>
  <script type="application/javascript;version=1.8" src="chrome://browser/content/devtools/app-manager/template.js"></script>

</html>
